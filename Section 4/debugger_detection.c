//Detect debugger using Kernel32 function (IsDebuggerPresent) in WIN API
#define PACKTUB_WIN32_DEBUG_DETECT
#include <windows.h>
#include <stdio.h>
 
int main(int argc, char **argv)
{
if (IsDebuggerPresent())
{
MessageBox(HWND_BROADCAST, "Debugger Detected, I will exit", "Debugger Detected", MB_OK);
exit();
}
MessageBox(HWND_BROADCAST, "Debugger Not Detected, I will infect", "Debugger Not Detected", MB_OK);
return 0;
}